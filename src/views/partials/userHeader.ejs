<!DOCTYPE html>
<html lang="en">


<!-- Cartfy/index-17.html  22 Nov 2019 10:00:25 GMT -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>KartFy - Online shopping </title>
    <meta name="keywords" content="HTML5 Template">
    <meta name="description" content="KartFy - Bootstrap eCommerce Template">
    <meta name="author" content="p-themes">
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/icons/favicon-16x16.png">
    <link rel="manifest" href="/assets/images/icons/site.html">
    <link rel="mask-icon" href="/app.js" color="#666666">
    <link rel="shortcut icon" href="/assets/images/icons/favicon.ico">
    <meta name="apple-mobile-web-app-title" content="Molla">
    <meta name="application-name" content="Molla">
    <meta name="msapplication-TileColor" content="#cc9966">
    <meta name="msapplication-config" content="assets/images/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="/assets/vendor/line-awesome/line-awesome/line-awesome/css/line-awesome.min.css">
    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/plugins/owl-carousel/owl.carousel.css">
    <link rel="stylesheet" href="/assets/css/plugins/magnific-popup/magnific-popup.css">
    <!-- Main CSS File -->
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/skins/skin-demo-17.css">
    <link rel="stylesheet" href="/assets/css/demos/demo-17.css">
    <script src="https://kit.fontawesome.com/b5f8202a71.js" crossorigin="anonymous"></script>
    
<!-- <script>
    const socket = io();

    socket.on('notify', (data) => {
        const
    })           const socket = io();
                            
                            let notificationButton = document.getElementById('notificationButton');
                            let notificationCounter = document.getElementById('notificationCount');
                            let cartCounter = document.getElementById('cart-count');
                            let wishlistCounter = document.getElementById('wishlist-count');
                         


                            socket.on('notify', (data) => {
                                notificationCounter.innerText = data

                            });

                            socket.on('updateCartCount', (count) => {
                                cartCounter.innerText = data

                            })

                            socket.on('updateWishlistCount', (data) => {
                                wishlistCounter.innerText = data

                            })


</script> -->
    
</head>


<body>
    <div class="page-wrapper">
        <header class="header header-6 sticky-header">
            <div class="header-top">
                <div class="container">
                    <div class="header-left">
                        <ul class="top-menu top-link-menu d-none d-md-block">
                            <li>
                                <a href="#">Links</a>
                                <ul>
                                    <li><a href="tel:+91 9744491844"><i class="icon-phone"></i>Call: +91 9744491844 </a>
                                    </li>
                                </ul>
                            </li>
                        </ul><!-- End .top-menu -->
                    </div><!-- End .header-left -->

                    <div class="header-right">
                        <div class="social-icons social-icons-color">
                            <a href="#" class="social-icon social-facebook" title="Facebook" target="_blank"><i
                                    class="icon-facebook-f"></i></a>
                            <a href="#" class="social-icon social-twitter" title="Twitter" target="_blank"><i
                                    class="icon-twitter"></i></a>
                            <a href="#" class="social-icon social-instagram" title="Pinterest" target="_blank"><i
                                    class="icon-instagram"></i></a>
                            <a href="#" class="social-icon social-pinterest" title="Instagram" target="_blank"><i
                                    class="icon-pinterest-p"></i></a>
                        </div><!-- End .soial-icons -->
                        <ul class="top-menu top-link-menu">
                            <li>
                                <a href="#">Links</a>

                            </li>
                        </ul><!-- End .top-menu -->
                        <%if(user) {%>

                            <div class="header-dropdown">
                                <a class="fw-bold text-md" href="#"><i class="fa-solid fa-user p-3"></i>
                                    <%=user.userName%>
                                </a>
                                <div class="header-menu">
                                    <ul>
                                        <li><a href="/api/v1/profile"><i class="fa-solid fa-user mx-3"></i>Profile</a>
                                        </li>
                                        <li><a href=""><button style="all:unset" onclick="logout()"><i
                                                        class="fa-solid fa-user-plus mx-3"></i></i>Logout</a></button>
                                        </li>
                                    </ul>
                                </div><!-- End .header-menu -->
                            </div><!-- End .header-dropdown -->
                            <%}else{%>
                                <div class="header-dropdown">
                                    <a href="#"><i class="fa-solid fa-user m-3"></i>Login</a>
                                    <div class="header-menu">
                                        <ul>
                                            <li><a href="/api/v1/signin"> <i
                                                        class="fa-solid fa-right-to-bracket mx-3"></i> Login</a></li>
                                            <li><a href="/api/v1/signup"><i
                                                        class="fa-solid fa-user-plus mx-3"></i>signup</a></li>
                                        </ul>
                                    </div><!-- End .header-menu -->
                                </div><!-- End .header-dropdown -->





                                <%}%>


                    </div><!-- End .header-right -->
                </div>
            </div>
            <div class="header-middle">
                <div class="container">
                    <!--  -->
                    <div class="header-center">
                        <a href="/api/v1/" class="logo">
                            <img src="/assets/images/demos/demo-6/logo.png" alt="Molla Logo" width="82" height="20">
                        </a>
                    </div><!-- End .header-left -->
                   
                    <%if(user){%>
                        <div class="header-right" id="header-right">
                            <a href="/api/v1/wishlist" class="wishlist-link">
                                <span class="wishlist-txt m-3">My Wishlist</span>
                                <i class="icon-heart-o"></i>
                                <span class="wishlist-count">
                                    <%=user.wishlistCount ? user.wishlistCount : 0 %>
                                </span>

                            </a>

                            <div class="dropdown cart-dropdown">
                                <a href="/api/v1/cart" class="dropdown-toggle">
                                    <i class="icon-shopping-cart"></i>
                                    <span class="cart-count">
                                        <%=user.cartCount ? user.cartCount : 0%>
                                    </span>

                                </a>

                                <div class="dropdown-menu d-none">
                                    <!-- End .cart-product -->

                                    <!-- <div class="dropdown-cart-total">
                                    <span>Total</span>

                                    <span class="cart-total-price">$160.00</span>
                                </div>End .dropdown-cart-total  -->


                                </div><!-- End .dropdown-menu -->
                            </div><!-- End .cart-dropdown -->
                        </div>
                        <a href="/api/v1/user-notifications">
                            <button id="notificationButton"  >
                                <i class="fas fa-bell"></i>
                                <span class="notification-count" id="notificationCount"><%= user.notificationCount > 9 ? '9+' : user.notificationCount%></span>
                            </button>
                        </a>
                        <script>
                            let notificationButton = document.getElementById('notificationButton')
                            let notificationCounter = document.getElementById('notificationCount')
                            let notificationCount = '<%= user.notificationCount%>'
                            console.log(notificationCount)
                            if(notificationCount > 0) {
                                notificationButton.classList.add('shakingAnimation');
                                notificationCounter.style.display = 'inline-block'

                            }else{
                                notificationButton.classList.remove('shakingAnimation');
                                notificationCounter.style.display = 'none'

                            }
                        </script>
                            <style>
                                .shakingAnimation {
                                    animation: shake 0.7s cubic-bezier(0.36, 0.07, 0.19, 0.97) infinite alternate;
        
                                }
                                #notificationButton {
                                    font-size: larger;
                                    position: absolute;
                                    /* Ensures the button stays in place when scrolling */
                                    top: 14%;
                                    /* Adjust position as needed */
                                    right: -6%;
                                    /* Adjust position as needed */
                                    background-color: transparent;
                                    /* Transparent background */
                                    border: none;
                                    /* Remove default border */
                                    padding: 10px;
                                    /* Adjust padding for desired size */
                                    cursor: pointer;
                                    /* Indicate interactivity */
                                   
                                    /* Animation for shaking */
                                }
        
                                #notificationButton i {
                                    font-size: 2em;
                                    /* Adjust icon size as needed */
                                    color: rgb(230, 161, 41);
                                    /* Or any desired color */
                                }
        
                                .notification-count {
                                    background-color: red;
                                    color: white;
                                    border-radius: 50%;
                                    padding: 1px 8px;
                                    font-size: 12px;
                                    position: absolute;
                                    top: -1px;
                                    right: 2px;
                                }
        
                                @keyframes shake {
                                    0% {
                                        transform: rotateZ(0deg);
                                    }
        
                                    10% {
                                        transform: rotateZ(-10deg);
                                    }
        
                                    20% {
                                        transform: rotateZ(10deg);
                                    }
        
                                    30% {
                                        transform: rotateZ(-10deg);
                                    }
        
                                    40% {
                                        transform: rotateZ(10deg);
                                    }
        
                                    50% {
                                        transform: rotateZ(0deg);
                                    }
                                }
                            </style>
        
                        <%}else{%>

                            <div class="header-right">
                                <i class="la la-lightbulb-o fs-4"></i>
                                <p class="m-3 fs-4">Clearance<span class="highlight fw-bold">&nbsp;Up to 30% Off</span>
                                </p>
                            </div>
                            <%}%>
                </div><!-- End .container -->
            </div><!-- End .header-middle -->
            <!-- <div class="row justify-content-center align-items-center text-center">
                <div id="error-div" class=" row justify-content-center align-items-center position-absolute "  role="alert">Error</div>
            </div> -->
            <script>
                function logout() {
                    fetch('/api/v1/logout', {
                        method: "GET",

                    }).then((res) => {
                        window.location.reload(true);
                    }).catch((error) => {
                        console.log(error)
                    })
                }
            </script>
        </header><!-- End .header -->